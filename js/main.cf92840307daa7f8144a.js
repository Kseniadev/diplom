!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=25)}({0:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"d",(function(){return c})),r.d(t,"g",(function(){return l})),r.d(t,"c",(function(){return d}));var n="d73506fc03d54bf7bfe482b2271b6f9e",i=/(\d{1,2}\.\d{1,2}\.\d{1,4})/g,a=/(\d{1,2})\.(\d{1,2})\.(\d{1,4})/g,o=localStorage.getItem("newsArray"),s=localStorage.getItem("query"),u=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],c=/(\d{1,4})-(\d{1,2})-(\d{1,2})/g,l=new Date(Date.now()+36e5).toLocaleString().match(i).join("").replace(a,(function(e,t,r,n){return"".concat(n,"-").concat(r,"-").concat(t)})),d=new Date(Date.now()-5184e5).toLocaleString().match(i).join("").replace(a,(function(e,t,r,n){return"".concat(n,"-").concat(r,"-").concat(t)}))},25:function(e,t,r){"use strict";r.r(t);r(8);var n=r(0),i=r(3);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u.set(this,{writable:!0,value:document.forms.news.elements.keyword}),c.set(this,{writable:!0,value:document.querySelector(".load-info__fail-description")}),l.set(this,{writable:!0,value:document.querySelector(".load-info__fail")}),d.set(this,{writable:!0,value:document.querySelector(".cards-grid")}),f.set(this,{writable:!0,value:document.querySelector(".load-info__loader")}),h.set(this,{writable:!0,value:document.querySelector(".cards-grid__show-more-button")}),y.set(this,{writable:!0,value:document.querySelector(".cards-grid__container")}),b.set(this,{writable:!0,value:document.querySelector(".content-info__button")}),p.set(this,{writable:!0,value:document.querySelector(".content-info__title")}),this.bind()}var t,r,n;return t=e,(r=[{key:"bind",value:function(){this.addToStorage=this.addToStorage.bind(this),this.showMore=this.showMore.bind(this),this.starting=this.starting.bind(this),this.deleteCards=this.deleteCards.bind(this)}},{key:"addListener",value:function(){o(this,h).addEventListener("click",this.showMore)}},{key:"removeListener",value:function(){o(this,h).removeEventListener("click",this.showMore)}},{key:"starting",value:function(e){this.array=e,this.array.length>3?(o(this,h).setAttribute("style","display:block;"),this.create(this.array.splice(0,3))):(this.create(this.array),this.removeListener(),o(this,h).removeAttribute("style"))}},{key:"showMore",value:function(){this.starting(this.array)}},{key:"addToStorage",value:function(e){localStorage.setItem("newsArray",JSON.stringify(e)),this.starting(JSON.parse(localStorage.getItem("newsArray")))}},{key:"deleteCards",value:function(){for(;o(this,y).firstChild;)o(this,y).removeChild(o(this,y).firstChild);o(this,d).setAttribute("style","display:none"),o(this,p).setAttribute("style","display:none"),o(this,y).setAttribute("style","display:none"),o(this,h).setAttribute("style","display:none"),o(this,b).setAttribute("style","display:none;")}},{key:"create",value:function(e){o(this,p).setAttribute("style","display:block"),o(this,d).setAttribute("style","display:block"),o(this,b).setAttribute("style","display:block;"),o(this,y).setAttribute("style","display:grid"),e.forEach((function(e){var t=document.createElement("a");t.setAttribute("class","cards-grid__item"),t.setAttribute("href",e.url),t.setAttribute("target","_blank"),t.setAttribute("style","display:block");var r=document.createElement("img");r.setAttribute("class","cards-grid__item-image"),r.setAttribute("alt",e.title),r.setAttribute("target","_blank"),r.setAttribute("src",e.urlToImage);var n=document.createElement("div");n.setAttribute("class","cards-grid__item-date"),n.textContent=Object(i.a)(e.publishedAt);var a=document.createElement("h3");a.setAttribute("class","cards-grid__item-subtitle"),a.textContent=e.title;var o=document.createElement("p");o.setAttribute("class","cards-grid__item-description"),o.textContent=e.description;var s=document.createElement("div");s.setAttribute("class","cards-grid__item-source"),s.textContent=e.source.name,t.append(r),t.append(n),t.append(a),t.append(o),t.append(s),document.querySelector(".cards-grid__container").append(t)}))}},{key:"disableInput",value:function(){o(this,u).setAttribute("disabled","disabled"),o(this,u).setAttribute("style","background: #ffffff4d; color: #00000040;")}},{key:"enableInput",value:function(){o(this,u).removeAttribute("disabled"),o(this,u).removeAttribute("style")}},{key:"showLoader",value:function(){o(this,d).setAttribute("style","display:block"),o(this,f).setAttribute("style","display:block")}},{key:"hideLoader",value:function(){o(this,f).setAttribute("style","display:none")}},{key:"hideLoadError",value:function(){o(this,l).setAttribute("style","display:none;")}},{key:"showLoadError",value:function(e){"TypeError: Failed to fetch"===e.toString()?o(this,c).textContent="Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз":o(this,c).textContent=e,o(this,l).setAttribute("style","display:block;")}}])&&a(t.prototype,r),n&&a(t,n),e}(),u=new WeakMap,c=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,y=new WeakMap,b=new WeakMap,p=new WeakMap,m=document.querySelector(".search-block__form").elements.keyword,v=new s;var g=r(4),w=document.querySelector(".search-block__button"),k=new s,A=document.querySelector(".search-block"),_=document.querySelector(".search-block__form").elements.keyword;w.addEventListener("click",(function(){event.preventDefault();var e=document.createElement("div");_.value.length>0?(e&&e.remove(),function(){event.preventDefault();var e=_.value;k.deleteCards(),k.showLoader(),k.removeListener(),k.disableInput(),new g.a("https://newsapi.org/v2/everything?q=".concat(e,"&apiKey=").concat(n.b,"&pageSize=100&from=").concat(n.g,"&to=").concat(n.c,"&language=ru")).getInfoFromApi().then((function(t){return k.hideLoadError(),localStorage.setItem("query",JSON.stringify(e)),localStorage.setItem("totalResults",JSON.stringify(t.totalResults)),t.articles})).then((function(e){k.addToStorage(e),k.addListener()})).catch((function(e){k.deleteCards(),k.showLoadError(e),localStorage.removeItem("newsArray")})).finally((function(){k.hideLoader(),k.enableInput()}))}()):(e.setAttribute("class","error-message"),e.textContent="Нужно ввести ключевое слово",A.append(e))})),null!==JSON.parse(n.e)&&(m.setAttribute("placeholder",JSON.parse(n.f)),v.addListener(),v.starting(JSON.parse(n.e)))},3:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0);function i(e){return e.match(n.d).join("").replace(n.d,(function(e,t,r,i){return"".concat(i," ").concat(n.a[r.substr(1)],", ").concat(t)}))}},4:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",(function(){return i}));var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t}var t,r,i;return t=e,(r=[{key:"getInfoFromApi",value:function(){return fetch(this.url).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e.json()):Promise.reject(new Error(e.statusText))})).then((function(e){return 0===e.totalResults?Promise.reject(e="К сожалению, по вашему запросу ничего не найдено"):"Your API key is invalid or incorrect. Check your key, or go to https://newsapi.org to create a free API key."===e.message?Promise.reject(e="Неправильно указан ключ API, подробности на сайте: https://newsapi.org "):e}))}}])&&n(t.prototype,r),i&&n(t,i),e}()},8:function(e,t,r){}});